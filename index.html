<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NipaPlay - 现代、美观、强大的视频播放器</title>
    <meta name="description" content="NipaPlay 是一款为影视爱好者打造的高性能视频播放器，支持海量格式，拥有强大的媒体库管理和流畅的在线流媒体播放功能，支持自动刮削和显示弹幕，支持挂载Emby和Jellyfin。">
    <style>
:root {
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", "Helvetica Neue", sans-serif;
    
    /* Light Theme */
    --bg-color-light: #f5f5f5;
    --bg-secondary-color-light: #ffffff;
    --text-color-light: #1a1a1a;
    --text-secondary-color-light: #5a5a5a;
    --accent-color-light: #0078d4;
    --accent-hover-color-light: #005a9e;
    --border-color-light: #e0e0e0;
    --shadow-color-light: rgba(0, 0, 0, 0.08);

    /* Dark Theme */
    --bg-color-dark: #1a1a1a;
    --bg-secondary-color-dark: #2c2c2c;
    --text-color-dark: #f5f5f5;
    --text-secondary-color-dark: #a0a0a0;
    --accent-color-dark: #2894ff;
    --accent-hover-color-dark: #50a8ff;
    --border-color-dark: #404040;
    --shadow-color-dark: rgba(0, 0, 0, 0.3);
    --header-height: calc(4rem + 1px);
}

[data-theme="light"] {
    --bg-color: var(--bg-color-light);
    --bg-secondary-color: var(--bg-secondary-color-light);
    --text-color: var(--text-color-light);
    --text-secondary-color: var(--text-secondary-color-light);
    --accent-color: var(--accent-color-light);
    --accent-hover-color: var(--accent-hover-color-light);
    --border-color: var(--border-color-light);
    --shadow-color: var(--shadow-color-light);
}

[data-theme="dark"] {
    --bg-color: var(--bg-color-dark);
    --bg-secondary-color: var(--bg-secondary-color-dark);
    --text-color: var(--text-color-dark);
    --text-secondary-color: var(--text-secondary-color-dark);
    --accent-color: var(--accent-color-dark);
    --accent-hover-color: var(--accent-hover-color-dark);
    --border-color: var(--border-color-dark);
    --shadow-color: var(--shadow-color-dark);
}

/* General Styles */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    scroll-behavior: smooth;
}

body {
    font-family: var(--font-family);
    background-color: var(--bg-color);
    color: var(--text-color);
    transition: background-color 0.3s ease, color 0.3s ease;
    line-height: 1.6;
    overflow-x: hidden;
}

body.modal-open, body.nav-open {
    overflow: hidden;
}

img {
    max-width: 100%;
    height: auto;
    display: block;
}

a {
    color: var(--accent-color);
    text-decoration: none;
    transition: color 0.2s ease;
}

a:hover {
    color: var(--accent-hover-color);
}

h1, h2, h3 {
    margin-bottom: 1rem;
    font-weight: 600;
}

h2 { font-size: 2.2rem; }

section {
    padding: 5rem 2rem;
    max-width: 1200px;
    margin: 0 auto;
}

/* Header */
.main-header {
    position: sticky;
    top: 0;
    width: 100%;
    z-index: 1000;
    background-color: color-mix(in srgb, var(--bg-color) 80%, transparent);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--border-color);
}

.main-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 1rem 2rem;
}

.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.5rem;
    font-weight: bold;
    color: var(--text-color);
    z-index: 1001;
}

.logo img {
    height: 32px;
    width: 32px;
}

.nav-group-right {
    display: flex;
    align-items: center;
    gap: 2rem;
}

.nav-links {
    display: flex;
    gap: 2rem;
}

.nav-links a {
    color: var(--text-secondary-color);
    font-weight: 500;
    transition: color 0.2s ease;
}
.nav-links a:hover {
    color: var(--text-color);
}

.header-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.nav-actions {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.theme-toggle {
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.theme-toggle:hover {
    background-color: var(--border-color);
}

.nav-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.8rem;
    cursor: pointer;
    z-index: 1001;
    padding: 0.25rem;
}

.nav-actions .cta-button {
    background: none;
    border: none;
    color: var(--text-color);
    font-size: 1.5rem;
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    width: 2.5rem;
    height: 2.5rem;
}

.nav-actions .cta-button:hover {
    background-color: var(--border-color);
    transform: none;
    box-shadow: none;
}

.nav-actions .cta-button i {
    margin-right: 0;
}

/* Call to Action Button */
.cta-button {
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    font-weight: 500;
    border: 1px solid transparent;
    transition: all 0.3s ease;
}
.cta-button.primary {
    background-color: var(--accent-color);
    color: white;
}
.cta-button.primary:hover {
    background-color: var(--accent-hover-color);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 15px var(--shadow-color);
}
.cta-button.secondary {
    background-color: var(--bg-secondary-color);
    color: var(--text-color);
    border-color: var(--border-color);
}
.cta-button.secondary:hover {
    background-color: var(--border-color);
}
.cta-button.large {
    padding: 0.8rem 2rem;
    font-size: 1.1rem;
}
.cta-button i {
    margin-right: 0.5rem;
}

/* Hero Section & Others... (omitted for brevity, no changes) */
.hero { display: flex; align-items: center; justify-content: space-between; gap: 4rem; min-height: 80vh; }
.hero-content { max-width: 50%; text-align: left; }
.hero-title-image { max-width: 100%; margin-bottom: 1rem; }
.hero-subtitle { font-size: 1.5rem; color: var(--text-secondary-color); margin: 1rem 0; }
.hero-description { font-size: 1.1rem; margin-bottom: 2rem; }
.hero-buttons { display: flex; justify-content: flex-start; gap: 1rem; }
.release-info { margin-top: 1.5rem; font-size: 0.9rem; color: var(--text-secondary-color); }
.release-info .separator { margin: 0 0.75rem; }
.hero-image { flex-shrink: 0; width: 45%; }
.hero-image img { border-radius: 12px; box-shadow: 0 20px 50px -10px var(--shadow-color); }
.features-section { background-color: var(--bg-secondary-color); }
.feature-block { display: flex; flex-direction: row; align-items: center; gap: 4rem; margin-bottom: 5rem; }
.feature-block:last-child { margin-bottom: 0; }
.feature-block.reverse { flex-direction: row-reverse; }
.feature-text { flex: 1; }
.feature-icon { font-size: 2.5rem; color: var(--accent-color); margin-bottom: 1rem; display: inline-block; }
.feature-text h2 { font-size: 2.5rem; }
.feature-text p { font-size: 1.1rem; color: var(--text-secondary-color); }
.feature-image { flex: 1; display: flex; justify-content: center; align-items: center; }
.feature-image img { border-radius: 6px; box-shadow: 0 10px 30px var(--shadow-color); transition: transform 0.4s ease, box-shadow 0.4s ease; }
.feature-image img:hover { transform: scale(1.05); box-shadow: 0 15px 40px -5px var(--shadow-color); }
.gallery-section { text-align: center; }
.gallery-section h2 { margin-bottom: 3rem; }
.image-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; }
.image-gallery img { width: 100%; height: 100%; object-fit: cover; border-radius: 6px; box-shadow: 0 5px 15px var(--shadow-color); transition: transform 0.4s ease, box-shadow 0.4s ease; }
.image-gallery img:hover { transform: translateY(-8px); box-shadow: 0 12px 25px var(--shadow-color); }
.anim-group {} .anim-child { opacity: 0; transform: translateY(30px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; will-change: opacity, transform; }
.anim-group.is-visible .anim-child { opacity: 1; transform: translateY(0); }
.anim-group.is-visible .anim-child--text { transition-delay: 0.2s; }
.main-footer { padding: 2rem 0; border-top: 1px solid var(--border-color); }
.footer-content { max-width: 1200px; margin: 0 auto; padding: 0 2rem; display: flex; justify-content: space-between; align-items: center; font-size: 0.9rem; }
.footer-content p { color: var(--text-secondary-color); }
.footer-links { display: flex; gap: 1.5rem; }
.footer-links a { color: var(--text-secondary-color); transition: color 0.3s ease; }
.footer-links a:hover { color: var(--text-color); }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); display: flex; justify-content: center; align-items: center; z-index: 2000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
.modal-overlay.is-visible { opacity: 1; visibility: visible; }
.modal-content { background-color: var(--bg-secondary-color); padding: 2rem; border-radius: 12px; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; transform: scale(0.95); transition: transform 0.3s ease; }
.modal-overlay.is-visible .modal-content { transform: scale(1); }
.modal-header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-color); padding-bottom: 1rem; margin-bottom: 1rem; }
.modal-header h2 { margin: 0; }
.modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--text-secondary-color); }
.download-list { list-style: none; padding: 0; }
.download-item { display: flex; align-items: center; padding: 1rem; border-radius: 8px; transition: background-color 0.2s ease; }
.download-item:hover { background-color: var(--border-color); }
.download-item i { font-size: 2rem; margin-right: 1rem; color: var(--accent-color); }
.download-info { flex-grow: 1; }
.download-info span { display: block; font-weight: 500; }
.download-info small { color: var(--text-secondary-color); }

/* Responsive Design */
@media (max-width: 992px) {
    h2 { font-size: 1.8rem; }
    .hero { flex-direction: column; text-align: center; }
    .hero-content { max-width: 100%; }
    .hero-buttons { justify-content: center; }
    .hero-image { width: 100%; margin-top: 2rem; }
    .feature-block, .feature-block.reverse { flex-direction: column; gap: 2rem; }
}

@media (max-width: 768px) {
    .main-header::after {
        content: '';
        position: absolute;
        inset: 0;
        background: rgba(0,0,0,0.4);
        opacity: 0;
        transition: opacity 0.3s ease-in-out;
        pointer-events: none;
        z-index: 998;
    }
    .main-header[data-nav-open="true"]::after {
        opacity: 1;
    }

    .main-nav {
        padding: 1rem;
    }
    
    .nav-toggle {
        display: block;
    }

    .nav-links {
        position: absolute;
        top: 0;
        right: 0;
        width: 50%;
        max-width: 280px;
        height: 100vh;
        background: var(--bg-secondary-color);
        box-shadow: -3px 0 15px rgba(0,0,0,0.15);
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
        z-index: 999;
        
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        padding: 5rem 1rem 1rem 1rem;
    }

    .main-header[data-nav-open="true"] .nav-links {
        transform: translateX(0);
    }
    
    .nav-links a {
        display: block;
        width: 100%;
        padding: 0.75rem 1rem;
        border-radius: 5px;
        color: var(--text-secondary-color);
        font-size: 1.1rem;
        font-weight: 500;
        transition: background-color 0.2s ease, color 0.2s ease;
    }

    .nav-links a:hover, .nav-links a:focus {
        background-color: var(--border-color);
        color: var(--text-color);
    }

    section {
        padding: 3rem 1rem;
    }
    .footer-content {
        flex-direction: column;
        gap: 1rem;
        text-align: center;
    }
}
</style>
    <link rel="icon" href="assets/icon.webp" type="image/webp">
    <!-- Fluent UI Icons -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
</head>
<body>

    <header class="main-header">
        <nav class="main-nav">
            <a href="index.html" class="logo">
                <img src="assets/icon.webp" alt="NipaPlay Icon">
                <span>NipaPlay</span>
            </a>
            <div class="nav-group-right">
                <div class="nav-links">
                    <a href="#features">功能特性</a>
                    <a href="#gallery">软件截图</a>
                    <a href="docs.html?type=documentation">使用文档</a>
                    <a href="docs.html?type=contributing_guide">贡献指南</a>
                    <a href="https://github.com/MCDFsteve/NipaPlay-Reload" target="_blank">项目地址</a>
                </div>
                <div class="header-controls">
                    <div class="nav-actions">
                        <button id="theme-toggle" class="theme-toggle" aria-label="切换日间/夜间模式">
                            <i class="ri-sun-line"></i>
                        </button>
                        <a href="javascript:void(0);" class="cta-button js-open-modal"><i class="ri-download-2-line"></i></a>
                    </div>
                    <button class="nav-toggle" aria-label="打开菜单">
                        <i class="ri-menu-line"></i>
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <!-- Main content remains unchanged -->
        <section class="hero anim-group">
            <div class="hero-content anim-child anim-child--text">
                <img src="assets/logo.webp" alt="NipaPlay Title Logo" class="hero-title-image">
                <p class="hero-subtitle">现代、美观、强大的视频播放器。</p>
                <p class="hero-description">专为极致影音体验而生，无论是本地收藏还是线上追剧，NipaPlay 都能为您带来前所未有的流畅与便捷。支持自动刮削和显示弹幕，支持挂载Emby和Jellyfin。</p>
                <div class="hero-buttons">
                    <a href="javascript:void(0);" class="cta-button primary js-open-modal"><i class="ri-download-2-line"></i>立即下载</a>
                    <a href="https://github.com/MCDFsteve/NipaPlay-Reload" class="cta-button secondary" target="_blank"><i class="ri-github-fill"></i>了解更多</a>
                </div>
                <div class="release-info">
                    <span id="release-version">正在获取最新版本...</span>
                    <span class="separator">|</span>
                    <span>QQ群: 961207150</span>
                </div>
            </div>
            <div class="hero-image anim-child">
                <img src="assets/hero_main.webp" alt="NipaPlay 主页截图">
            </div>
        </section>

        <section id="features" class="features-section">
            <div class="feature-block anim-group">
                <div class="feature-text anim-child anim-child--text">
                    <i class="ri-tv-2-line feature-icon"></i>
                    <h2>强大的媒体中心</h2>
                    <p>自动削刮影片信息，生成精美的海报墙。无论是电影、剧集还是动漫，所有收藏都一目了然，为您打造私人影视库。</p>
                </div>
                <div class="feature-image anim-child">
                    <img src="assets/feature_media_library.webp" alt="媒体库界面">
                </div>
            </div>

            <div class="feature-block reverse anim-group">
                <div class="feature-text anim-child anim-child--text">
                    <i class="ri-film-line feature-icon"></i>
                    <h2>沉浸式播放体验</h2>
                    <p>简洁而强大的播放界面，支持多种视频格式和高级功能。调整字幕、切换音轨、逐帧预览，一切尽在掌握。</p>
                </div>
                <div class="feature-image anim-child">
                    <img src="assets/feature_playback_ui.webp" alt="播放界面UI展示">
                </div>
            </div>

            <div class="feature-block anim-group">
                <div class="feature-text anim-child anim-child--text">
                    <i class="ri-clapperboard-line feature-icon"></i>
                    <h2>在线流媒体支持</h2>
                    <p>无缝整合在线流媒体资源，无论是热门新番还是经典剧集，都能快速访问和播放，享受即点即播的快感。</p>
                </div>
                <div class="feature-image anim-child">
                    <img src="assets/feature_streaming.webp" alt="流媒体详情页面">
                </div>
            </div>
            
            <div class="feature-block reverse anim-group">
                <div class="feature-text anim-child anim-child--text">
                    <i class="ri-smartphone-line feature-icon"></i>
                    <h2>全平台响应式设计</h2>
                    <p>NipaPlay 不仅在桌面端表现出色，同样完美适配移动设备。随时随地，享受一致的优质体验。</p>
                </div>
                <div class="feature-image anim-child">
                    <img src="assets/feature_mobile.webp" alt="手机版主页">
                </div>
            </div>
        </section>

        <section id="gallery" class="gallery-section anim-group">
            <h2 class="anim-child">软件截图</h2>
            <div class="image-gallery anim-child anim-child--text">
                <img src="assets/gallery_series_list.webp" alt="剧集列表界面">
                <img src="assets/gallery_series_details.webp" alt="新番详情界面">
                <img src="assets/gallery_library_management.webp" alt="库管理界面">
                <img src="assets/gallery_streaming_library.webp" alt="流媒体媒体库">
            </div>
        </section>

    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <p>&copy; 2025 NipaPlay. All Rights Reserved. Developed by <a href="http://www.aimes-soft.com" target="_blank">Aimes Soft</a>.</p>
            <div class="footer-links">
                <a href="https://github.com/MCDFsteve/NipaPlay-Reload" target="_blank">GitHub</a>
                <a href="https://github.com/MCDFsteve/NipaPlay-Reload/issues" target="_blank">问题反馈</a>
            </div>
        </div>
    </footer>

    <div id="download-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>下载 NipaPlay</h2>
                <button id="modal-close" class="modal-close"><i class="ri-close-line"></i></button>
            </div>
            <div id="modal-body" class="modal-body">
                <p>正在加载版本信息...</p>
            </div>
        </div>
    </div>

    <script>
document.addEventListener('DOMContentLoaded', () => {
    // --- Global State --- //
    let releasesData = null;
    let fetchError = null;

    // --- DOM Elements --- //
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = themeToggle.querySelector('i');
    const docElement = document.documentElement;
    const animatedElements = document.querySelectorAll('.anim-group');
    const modal = document.getElementById('download-modal');
    const modalBody = document.getElementById('modal-body');
    const openModalButtons = document.querySelectorAll('.js-open-modal');
    const closeModalButton = document.getElementById('modal-close');
    const versionSpan = document.getElementById('release-version');
    const navToggle = document.querySelector('.nav-toggle');
    const mainHeader = document.querySelector('.main-header');
    const navLinks = document.querySelector('.nav-links');

    // --- Functions --- //

    const setTheme = (theme) => {
        docElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
        themeIcon.className = theme === 'dark' ? 'ri-moon-line' : 'ri-sun-line';
    };

    const updateVersionDisplay = () => {
        if (fetchError) {
            versionSpan.textContent = '版本信息加载失败';
            return;
        }
        if (releasesData && releasesData.length > 0) {
            const latestVersion = releasesData[0].version;
            versionSpan.textContent = `最新版本: ${latestVersion}`;
        } else {
            versionSpan.textContent = '暂无版本信息';
        }
    };

    const populateModal = () => {
        if (fetchError) {
            modalBody.innerHTML = `<p>加载版本信息失败，请稍后重试或直接访问 <a href="https://github.com/MCDFsteve/NipaPlay-Reload/releases">GitHub Releases</a> 页面。</p>`;
            return;
        }
        if (releasesData && releasesData.length > 0) {
            modalBody.innerHTML = '';
            const list = document.createElement('ul');
            list.className = 'download-list';
            releasesData.forEach(asset => {
                const listItem = document.createElement('li');
                listItem.className = 'download-item';
                listItem.innerHTML = `
                    <i class="${asset.icon}"></i>
                    <div class="download-info">
                        <span>${asset.os}</span>
                        <small>${asset.name}</small>
                    </div>
                    <a href="${asset.path}" class="cta-button primary" download>下载</a>
                `;
                list.appendChild(listItem);
            });
            modalBody.appendChild(list);
        } else {
            modalBody.innerHTML = '<p>没有找到可用的下载文件。请稍后重试。</p>';
        }
    };
    
    const openModal = () => {
        modal.classList.add('is-visible');
        document.body.classList.add('modal-open');
        populateModal();
    };

    const closeModal = () => {
        modal.classList.remove('is-visible');
        document.body.classList.remove('modal-open');
        modalBody.innerHTML = '<p>正在加载版本信息...</p>';
    };

    const toggleNav = () => {
        const isNavOpen = mainHeader.getAttribute('data-nav-open') === 'true';
        mainHeader.setAttribute('data-nav-open', !isNavOpen);
        document.body.classList.toggle('nav-open', !isNavOpen);
    };

    // --- Initializations --- //

    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    setTheme(savedTheme || (prefersDark ? 'dark' : 'light'));

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.2 });
    animatedElements.forEach(el => observer.observe(el));

    fetch('releases.json')
        .then(response => {
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            return response.json();
        })
        .then(data => {
            releasesData = data;
            updateVersionDisplay();
        })
        .catch(error => {
            console.error("Error fetching releases:", error);
            fetchError = error;
            updateVersionDisplay();
        });

    // --- Event Listeners --- //
    themeToggle.addEventListener('click', () => {
        const currentTheme = docElement.getAttribute('data-theme');
        setTheme(currentTheme === 'dark' ? 'light' : 'dark');
    });

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
        if (!localStorage.getItem('theme')) {
            setTheme(e.matches ? 'dark' : 'light');
        }
    });

    openModalButtons.forEach(button => button.addEventListener('click', openModal));
    closeModalButton.addEventListener('click', closeModal);
    modal.addEventListener('click', (event) => {
        if (event.target === modal) closeModal();
    });

    navToggle.addEventListener('click', toggleNav);

    // Close nav when clicking outside
    document.addEventListener('click', (e) => {
        const isNavOpen = mainHeader.getAttribute('data-nav-open') === 'true';
        if (isNavOpen && !navLinks.contains(e.target) && !navToggle.contains(e.target)) {
            toggleNav(); // Close the nav
        }
    });

    // Close nav when a link is clicked
    navLinks.addEventListener('click', (e) => {
        if (e.target.tagName === 'A') {
            toggleNav();
        }
    });
});
    </script>
</body>
</html>